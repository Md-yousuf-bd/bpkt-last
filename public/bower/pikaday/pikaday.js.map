{"version":3,"sources":["pikaday.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pikaday.js","sourcesContent":["/*!\r\n * Pikaday\r\n *\r\n * Copyright Â© 2014 David Bushell | BSD & MIT license | https://github.com/Pikaday/Pikaday\r\n */\r\n\r\n(function (root, factory)\r\n{\r\n    'use strict';\r\n\r\n    var moment;\r\n    if (typeof exports === 'object') {\r\n        // CommonJS module\r\n        // Load moment.js as an optional dependency\r\n        try { moment = require('moment'); } catch (e) {}\r\n        module.exports = factory(moment);\r\n    } else if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(function (req)\r\n        {\r\n            // Load moment.js as an optional dependency\r\n            var id = 'moment';\r\n            try { moment = req(id); } catch (e) {}\r\n            return factory(moment);\r\n        });\r\n    } else {\r\n        root.Pikaday = factory(root.moment);\r\n    }\r\n}(this, function (moment)\r\n{\r\n    'use strict';\r\n\r\n    /**\r\n     * feature detection and helper functions\r\n     */\r\n    var hasMoment = typeof moment === 'function',\r\n\r\n        hasEventListeners = !!window.addEventListener,\r\n\r\n        document = window.document,\r\n\r\n        sto = window.setTimeout,\r\n\r\n        addEvent = function(el, e, callback, capture)\r\n        {\r\n            if (hasEventListeners) {\r\n                el.addEventListener(e, callback, !!capture);\r\n            } else {\r\n                el.attachEvent('on' + e, callback);\r\n            }\r\n        },\r\n\r\n        removeEvent = function(el, e, callback, capture)\r\n        {\r\n            if (hasEventListeners) {\r\n                el.removeEventListener(e, callback, !!capture);\r\n            } else {\r\n                el.detachEvent('on' + e, callback);\r\n            }\r\n        },\r\n\r\n        trim = function(str)\r\n        {\r\n            return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\r\n        },\r\n\r\n        hasClass = function(el, cn)\r\n        {\r\n            return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\r\n        },\r\n\r\n        addClass = function(el, cn)\r\n        {\r\n            if (!hasClass(el, cn)) {\r\n                el.className = (el.className === '') ? cn : el.className + ' ' + cn;\r\n            }\r\n        },\r\n\r\n        removeClass = function(el, cn)\r\n        {\r\n            el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\r\n        },\r\n\r\n        isArray = function(obj)\r\n        {\r\n            return (/Array/).test(Object.prototype.toString.call(obj));\r\n        },\r\n\r\n        isDate = function(obj)\r\n        {\r\n            return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\r\n        },\r\n\r\n        isWeekend = function(date)\r\n        {\r\n            var day = date.getDay();\r\n            return day === 0 || day === 6;\r\n        },\r\n\r\n        isLeapYear = function(year)\r\n        {\r\n            // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\r\n            return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\r\n        },\r\n\r\n        getDaysInMonth = function(year, month)\r\n        {\r\n            return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\r\n        },\r\n\r\n        setToStartOfDay = function(date)\r\n        {\r\n            if (isDate(date)) date.setHours(0,0,0,0);\r\n        },\r\n\r\n        compareDates = function(a,b)\r\n        {\r\n            // weak date comparison (use setToStartOfDay(date) to ensure correct result)\r\n            return a.getTime() === b.getTime();\r\n        },\r\n\r\n        extend = function(to, from, overwrite)\r\n        {\r\n            var prop, hasProp;\r\n            for (prop in from) {\r\n                hasProp = to[prop] !== undefined;\r\n                if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\r\n                    if (isDate(from[prop])) {\r\n                        if (overwrite) {\r\n                            to[prop] = new Date(from[prop].getTime());\r\n                        }\r\n                    }\r\n                    else if (isArray(from[prop])) {\r\n                        if (overwrite) {\r\n                            to[prop] = from[prop].slice(0);\r\n                        }\r\n                    } else {\r\n                        to[prop] = extend({}, from[prop], overwrite);\r\n                    }\r\n                } else if (overwrite || !hasProp) {\r\n                    to[prop] = from[prop];\r\n                }\r\n            }\r\n            return to;\r\n        },\r\n\r\n        fireEvent = function(el, eventName, data)\r\n        {\r\n            var ev;\r\n\r\n            if (document.createEvent) {\r\n                ev = document.createEvent('HTMLEvents');\r\n                ev.initEvent(eventName, true, false);\r\n                ev = extend(ev, data);\r\n                el.dispatchEvent(ev);\r\n            } else if (document.createEventObject) {\r\n                ev = document.createEventObject();\r\n                ev = extend(ev, data);\r\n                el.fireEvent('on' + eventName, ev);\r\n            }\r\n        },\r\n\r\n        adjustCalendar = function(calendar) {\r\n            if (calendar.month < 0) {\r\n                calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\r\n                calendar.month += 12;\r\n            }\r\n            if (calendar.month > 11) {\r\n                calendar.year += Math.floor(Math.abs(calendar.month)/12);\r\n                calendar.month -= 12;\r\n            }\r\n            return calendar;\r\n        },\r\n\r\n        /**\r\n         * defaults and localisation\r\n         */\r\n        defaults = {\r\n\r\n            // bind the picker to a form field\r\n            field: null,\r\n\r\n            // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\r\n            bound: undefined,\r\n\r\n            // data-attribute on the input field with an aria assistance tekst (only applied when `bound` is set)\r\n            ariaLabel: 'Use the arrow keys to pick a date',\r\n\r\n            // position of the datepicker, relative to the field (default to bottom & left)\r\n            // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\r\n            position: 'bottom left',\r\n\r\n            // automatically fit in the viewport even if it means repositioning from the position option\r\n            reposition: true,\r\n\r\n            // the default output format for `.toString()` and `field` value\r\n            format: 'YYYY-MM-DD',\r\n\r\n            // the toString function which gets passed a current date object and format\r\n            // and returns a string\r\n            toString: null,\r\n\r\n            // used to create date object from current input string\r\n            parse: null,\r\n\r\n            // the initial date to view when first opened\r\n            defaultDate: null,\r\n\r\n            // make the `defaultDate` the initial selected value\r\n            setDefaultDate: false,\r\n\r\n            // first day of week (0: Sunday, 1: Monday etc)\r\n            firstDay: 0,\r\n\r\n            // the default flag for moment's strict date parsing\r\n            formatStrict: false,\r\n\r\n            // the minimum/earliest date that can be selected\r\n            minDate: null,\r\n            // the maximum/latest date that can be selected\r\n            maxDate: null,\r\n\r\n            // number of years either side, or array of upper/lower range\r\n            yearRange: 10,\r\n\r\n            // show week numbers at head of row\r\n            showWeekNumber: false,\r\n\r\n            // Week picker mode\r\n            pickWholeWeek: false,\r\n\r\n            // used internally (don't config outside)\r\n            minYear: 0,\r\n            maxYear: 9999,\r\n            minMonth: undefined,\r\n            maxMonth: undefined,\r\n\r\n            startRange: null,\r\n            endRange: null,\r\n\r\n            isRTL: false,\r\n\r\n            // Additional text to append to the year in the calendar title\r\n            yearSuffix: '',\r\n\r\n            // Render the month after year in the calendar title\r\n            showMonthAfterYear: false,\r\n\r\n            // Render days of the calendar grid that fall in the next or previous month\r\n            showDaysInNextAndPreviousMonths: false,\r\n\r\n            // Allows user to select days that fall in the next or previous month\r\n            enableSelectionDaysInNextAndPreviousMonths: false,\r\n\r\n            // how many months are visible\r\n            numberOfMonths: 1,\r\n\r\n            // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\r\n            // only used for the first display or when a selected date is not visible\r\n            mainCalendar: 'left',\r\n\r\n            // Specify a DOM element to render the calendar in\r\n            container: undefined,\r\n\r\n            // Blur field when date is selected\r\n            blurFieldOnSelect : true,\r\n\r\n            // internationalization\r\n            i18n: {\r\n                previousMonth : 'Previous Month',\r\n                nextMonth     : 'Next Month',\r\n                months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\r\n                weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\r\n                weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\r\n            },\r\n\r\n            // Theme Classname\r\n            theme: null,\r\n\r\n            // events array\r\n            events: [],\r\n\r\n            // callback function\r\n            onSelect: null,\r\n            onOpen: null,\r\n            onClose: null,\r\n            onDraw: null,\r\n\r\n            // Enable keyboard input\r\n            keyboardInput: true\r\n        },\r\n\r\n\r\n        /**\r\n         * templating functions to abstract HTML rendering\r\n         */\r\n        renderDayName = function(opts, day, abbr)\r\n        {\r\n            day += opts.firstDay;\r\n            while (day >= 7) {\r\n                day -= 7;\r\n            }\r\n            return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\r\n        },\r\n\r\n        renderDay = function(opts)\r\n        {\r\n            var arr = [];\r\n            var ariaSelected = 'false';\r\n            if (opts.isEmpty) {\r\n                if (opts.showDaysInNextAndPreviousMonths) {\r\n                    arr.push('is-outside-current-month');\r\n\r\n                    if(!opts.enableSelectionDaysInNextAndPreviousMonths) {\r\n                        arr.push('is-selection-disabled');\r\n                    }\r\n\r\n                } else {\r\n                    return '<td class=\"is-empty\"></td>';\r\n                }\r\n            }\r\n            if (opts.isDisabled) {\r\n                arr.push('is-disabled');\r\n            }\r\n            if (opts.isToday) {\r\n                arr.push('is-today');\r\n            }\r\n            if (opts.isSelected) {\r\n                arr.push('is-selected');\r\n                ariaSelected = 'true';\r\n            }\r\n            if (opts.hasEvent) {\r\n                arr.push('has-event');\r\n            }\r\n            if (opts.isInRange) {\r\n                arr.push('is-inrange');\r\n            }\r\n            if (opts.isStartRange) {\r\n                arr.push('is-startrange');\r\n            }\r\n            if (opts.isEndRange) {\r\n                arr.push('is-endrange');\r\n            }\r\n            return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\" aria-selected=\"' + ariaSelected + '\">' +\r\n                '<button class=\"pika-button pika-day\" type=\"button\" ' +\r\n                'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\r\n                opts.day +\r\n                '</button>' +\r\n                '</td>';\r\n        },\r\n\r\n        renderWeek = function (d, m, y) {\r\n            // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\r\n            var onejan = new Date(y, 0, 1),\r\n                weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\r\n            return '<td class=\"pika-week\">' + weekNum + '</td>';\r\n        },\r\n\r\n        renderRow = function(days, isRTL, pickWholeWeek, isRowSelected)\r\n        {\r\n            return '<tr class=\"pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '\">' + (isRTL ? days.reverse() : days).join('') + '</tr>';\r\n        },\r\n\r\n        renderBody = function(rows)\r\n        {\r\n            return '<tbody>' + rows.join('') + '</tbody>';\r\n        },\r\n\r\n        renderHead = function(opts)\r\n        {\r\n            var i, arr = [];\r\n            if (opts.showWeekNumber) {\r\n                arr.push('<th></th>');\r\n            }\r\n            for (i = 0; i < 7; i++) {\r\n                arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\r\n            }\r\n            return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';\r\n        },\r\n\r\n        renderTitle = function(instance, c, year, month, refYear, randId)\r\n        {\r\n            var i, j, arr,\r\n                opts = instance._o,\r\n                isMinYear = year === opts.minYear,\r\n                isMaxYear = year === opts.maxYear,\r\n                html = '<div id=\"' + randId + '\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">',\r\n                monthHtml,\r\n                yearHtml,\r\n                prev = true,\r\n                next = true;\r\n\r\n            for (arr = [], i = 0; i < 12; i++) {\r\n                arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\r\n                    (i === month ? ' selected=\"selected\"': '') +\r\n                    ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled=\"disabled\"' : '') + '>' +\r\n                    opts.i18n.months[i] + '</option>');\r\n            }\r\n\r\n            monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\r\n\r\n            if (isArray(opts.yearRange)) {\r\n                i = opts.yearRange[0];\r\n                j = opts.yearRange[1] + 1;\r\n            } else {\r\n                i = year - opts.yearRange;\r\n                j = 1 + year + opts.yearRange;\r\n            }\r\n\r\n            for (arr = []; i < j && i <= opts.maxYear; i++) {\r\n                if (i >= opts.minYear) {\r\n                    arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected=\"selected\"': '') + '>' + (i) + '</option>');\r\n                }\r\n            }\r\n            yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\r\n\r\n            if (opts.showMonthAfterYear) {\r\n                html += yearHtml + monthHtml;\r\n            } else {\r\n                html += monthHtml + yearHtml;\r\n            }\r\n\r\n            if (isMinYear && (month === 0 || opts.minMonth >= month)) {\r\n                prev = false;\r\n            }\r\n\r\n            if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\r\n                next = false;\r\n            }\r\n\r\n            if (c === 0) {\r\n                html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\r\n            }\r\n            if (c === (instance._o.numberOfMonths - 1) ) {\r\n                html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\r\n            }\r\n\r\n            return html += '</div>';\r\n        },\r\n\r\n        renderTable = function(opts, data, randId)\r\n        {\r\n            return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"' + randId + '\">' + renderHead(opts) + renderBody(data) + '</table>';\r\n        },\r\n\r\n\r\n        /**\r\n         * Pikaday constructor\r\n         */\r\n        Pikaday = function(options)\r\n        {\r\n            var self = this,\r\n                opts = self.config(options);\r\n\r\n            self._onMouseDown = function(e)\r\n            {\r\n                if (!self._v) {\r\n                    return;\r\n                }\r\n                e = e || window.event;\r\n                var target = e.target || e.srcElement;\r\n                if (!target) {\r\n                    return;\r\n                }\r\n\r\n                if (!hasClass(target, 'is-disabled')) {\r\n                    if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {\r\n                        self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\r\n                        if (opts.bound) {\r\n                            sto(function() {\r\n                                self.hide();\r\n                                if (opts.blurFieldOnSelect && opts.field) {\r\n                                    opts.field.blur();\r\n                                }\r\n                            }, 100);\r\n                        }\r\n                    }\r\n                    else if (hasClass(target, 'pika-prev')) {\r\n                        self.prevMonth();\r\n                    }\r\n                    else if (hasClass(target, 'pika-next')) {\r\n                        self.nextMonth();\r\n                    }\r\n                }\r\n                if (!hasClass(target, 'pika-select')) {\r\n                    // if this is touch event prevent mouse events emulation\r\n                    if (e.preventDefault) {\r\n                        e.preventDefault();\r\n                    } else {\r\n                        e.returnValue = false;\r\n                        return false;\r\n                    }\r\n                } else {\r\n                    self._c = true;\r\n                }\r\n            };\r\n\r\n            self._onChange = function(e)\r\n            {\r\n                e = e || window.event;\r\n                var target = e.target || e.srcElement;\r\n                if (!target) {\r\n                    return;\r\n                }\r\n                if (hasClass(target, 'pika-select-month')) {\r\n                    self.gotoMonth(target.value);\r\n                }\r\n                else if (hasClass(target, 'pika-select-year')) {\r\n                    self.gotoYear(target.value);\r\n                }\r\n            };\r\n\r\n            self._onKeyChange = function(e)\r\n            {\r\n                e = e || window.event;\r\n\r\n                if (self.isVisible()) {\r\n\r\n                    switch(e.keyCode){\r\n                        case 13:\r\n                        case 27:\r\n                            if (opts.field) {\r\n                                opts.field.blur();\r\n                            }\r\n                            break;\r\n                        case 37:\r\n                            e.preventDefault();\r\n                            self.adjustDate('subtract', 1);\r\n                            break;\r\n                        case 38:\r\n                            self.adjustDate('subtract', 7);\r\n                            break;\r\n                        case 39:\r\n                            self.adjustDate('add', 1);\r\n                            break;\r\n                        case 40:\r\n                            self.adjustDate('add', 7);\r\n                            break;\r\n                    }\r\n                }\r\n            };\r\n\r\n            self._onInputChange = function(e)\r\n            {\r\n                var date;\r\n\r\n                if (e.firedBy === self) {\r\n                    return;\r\n                }\r\n                if (opts.parse) {\r\n                    date = opts.parse(opts.field.value, opts.format);\r\n                } else if (hasMoment) {\r\n                    date = moment(opts.field.value, opts.format, opts.formatStrict);\r\n                    date = (date && date.isValid()) ? date.toDate() : null;\r\n                }\r\n                else {\r\n                    date = new Date(Date.parse(opts.field.value));\r\n                }\r\n                if (isDate(date)) {\r\n                    self.setDate(date);\r\n                }\r\n                if (!self._v) {\r\n                    self.show();\r\n                }\r\n            };\r\n\r\n            self._onInputFocus = function()\r\n            {\r\n                self.show();\r\n            };\r\n\r\n            self._onInputClick = function()\r\n            {\r\n                self.show();\r\n            };\r\n\r\n            self._onInputBlur = function()\r\n            {\r\n                // IE allows pika div to gain focus; catch blur the input field\r\n                var pEl = document.activeElement;\r\n                do {\r\n                    if (hasClass(pEl, 'pika-single')) {\r\n                        return;\r\n                    }\r\n                }\r\n                while ((pEl = pEl.parentNode));\r\n\r\n                if (!self._c) {\r\n                    self._b = sto(function() {\r\n                        self.hide();\r\n                    }, 50);\r\n                }\r\n                self._c = false;\r\n            };\r\n\r\n            self._onClick = function(e)\r\n            {\r\n                e = e || window.event;\r\n                var target = e.target || e.srcElement,\r\n                    pEl = target;\r\n                if (!target) {\r\n                    return;\r\n                }\r\n                if (!hasEventListeners && hasClass(target, 'pika-select')) {\r\n                    if (!target.onchange) {\r\n                        target.setAttribute('onchange', 'return;');\r\n                        addEvent(target, 'change', self._onChange);\r\n                    }\r\n                }\r\n                do {\r\n                    if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\r\n                        return;\r\n                    }\r\n                }\r\n                while ((pEl = pEl.parentNode));\r\n                if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\r\n                    self.hide();\r\n                }\r\n            };\r\n\r\n            self.el = document.createElement('div');\r\n            self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\r\n\r\n            addEvent(self.el, 'mousedown', self._onMouseDown, true);\r\n            addEvent(self.el, 'touchend', self._onMouseDown, true);\r\n            addEvent(self.el, 'change', self._onChange);\r\n\r\n            if (opts.keyboardInput) {\r\n                addEvent(document, 'keydown', self._onKeyChange);\r\n            }\r\n\r\n            if (opts.field) {\r\n                if (opts.container) {\r\n                    opts.container.appendChild(self.el);\r\n                } else if (opts.bound) {\r\n                    document.body.appendChild(self.el);\r\n                } else {\r\n                    opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\r\n                }\r\n                addEvent(opts.field, 'change', self._onInputChange);\r\n\r\n                if (!opts.defaultDate) {\r\n                    if (hasMoment && opts.field.value) {\r\n                        opts.defaultDate = moment(opts.field.value, opts.format).toDate();\r\n                    } else {\r\n                        opts.defaultDate = new Date(Date.parse(opts.field.value));\r\n                    }\r\n                    opts.setDefaultDate = true;\r\n                }\r\n            }\r\n\r\n            var defDate = opts.defaultDate;\r\n\r\n            if (isDate(defDate)) {\r\n                if (opts.setDefaultDate) {\r\n                    self.setDate(defDate, true);\r\n                } else {\r\n                    self.gotoDate(defDate);\r\n                }\r\n            } else {\r\n                self.gotoDate(new Date());\r\n            }\r\n\r\n            if (opts.bound) {\r\n                this.hide();\r\n                self.el.className += ' is-bound';\r\n                addEvent(opts.trigger, 'click', self._onInputClick);\r\n                addEvent(opts.trigger, 'focus', self._onInputFocus);\r\n                addEvent(opts.trigger, 'blur', self._onInputBlur);\r\n            } else {\r\n                this.show();\r\n            }\r\n        };\r\n\r\n\r\n    /**\r\n     * public Pikaday API\r\n     */\r\n    Pikaday.prototype = {\r\n\r\n\r\n        /**\r\n         * configure functionality\r\n         */\r\n        config: function(options)\r\n        {\r\n            if (!this._o) {\r\n                this._o = extend({}, defaults, true);\r\n            }\r\n\r\n            var opts = extend(this._o, options, true);\r\n\r\n            opts.isRTL = !!opts.isRTL;\r\n\r\n            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\r\n\r\n            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\r\n\r\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\r\n\r\n            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\r\n\r\n            opts.disableWeekends = !!opts.disableWeekends;\r\n\r\n            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\r\n\r\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\r\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\r\n\r\n            if (!isDate(opts.minDate)) {\r\n                opts.minDate = false;\r\n            }\r\n            if (!isDate(opts.maxDate)) {\r\n                opts.maxDate = false;\r\n            }\r\n            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\r\n                opts.maxDate = opts.minDate = false;\r\n            }\r\n            if (opts.minDate) {\r\n                this.setMinDate(opts.minDate);\r\n            }\r\n            if (opts.maxDate) {\r\n                this.setMaxDate(opts.maxDate);\r\n            }\r\n\r\n            if (isArray(opts.yearRange)) {\r\n                var fallback = new Date().getFullYear() - 10;\r\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\r\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\r\n            } else {\r\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\r\n                if (opts.yearRange > 100) {\r\n                    opts.yearRange = 100;\r\n                }\r\n            }\r\n\r\n            return opts;\r\n        },\r\n\r\n        /**\r\n         * return a formatted string of the current selection (using Moment.js if available)\r\n         */\r\n        toString: function(format)\r\n        {\r\n            format = format || this._o.format;\r\n            if (!isDate(this._d)) {\r\n                return '';\r\n            }\r\n            if (this._o.toString) {\r\n                return this._o.toString(this._d, format);\r\n            }\r\n            if (hasMoment) {\r\n                return moment(this._d).format(format);\r\n            }\r\n            return this._d.toDateString();\r\n        },\r\n\r\n        /**\r\n         * return a Moment.js object of the current selection (if available)\r\n         */\r\n        getMoment: function()\r\n        {\r\n            return hasMoment ? moment(this._d) : null;\r\n        },\r\n\r\n        /**\r\n         * set the current selection from a Moment.js object (if available)\r\n         */\r\n        setMoment: function(date, preventOnSelect)\r\n        {\r\n            if (hasMoment && moment.isMoment(date)) {\r\n                this.setDate(date.toDate(), preventOnSelect);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * return a Date object of the current selection\r\n         */\r\n        getDate: function()\r\n        {\r\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\r\n        },\r\n\r\n        /**\r\n         * set the current selection\r\n         */\r\n        setDate: function(date, preventOnSelect)\r\n        {\r\n            if (!date) {\r\n                this._d = null;\r\n\r\n                if (this._o.field) {\r\n                    this._o.field.value = '';\r\n                    fireEvent(this._o.field, 'change', { firedBy: this });\r\n                }\r\n\r\n                return this.draw();\r\n            }\r\n            if (typeof date === 'string') {\r\n                date = new Date(Date.parse(date));\r\n            }\r\n            if (!isDate(date)) {\r\n                return;\r\n            }\r\n\r\n            var min = this._o.minDate,\r\n                max = this._o.maxDate;\r\n\r\n            if (isDate(min) && date < min) {\r\n                date = min;\r\n            } else if (isDate(max) && date > max) {\r\n                date = max;\r\n            }\r\n\r\n            this._d = new Date(date.getTime());\r\n            setToStartOfDay(this._d);\r\n            this.gotoDate(this._d);\r\n\r\n            if (this._o.field) {\r\n                this._o.field.value = this.toString();\r\n                fireEvent(this._o.field, 'change', { firedBy: this });\r\n            }\r\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\r\n                this._o.onSelect.call(this, this.getDate());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * change view to a specific date\r\n         */\r\n        gotoDate: function(date)\r\n        {\r\n            var newCalendar = true;\r\n\r\n            if (!isDate(date)) {\r\n                return;\r\n            }\r\n\r\n            if (this.calendars) {\r\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\r\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\r\n                    visibleDate = date.getTime();\r\n                // get the end of the month\r\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\r\n                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\r\n                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\r\n            }\r\n\r\n            if (newCalendar) {\r\n                this.calendars = [{\r\n                    month: date.getMonth(),\r\n                    year: date.getFullYear()\r\n                }];\r\n                if (this._o.mainCalendar === 'right') {\r\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\r\n                }\r\n            }\r\n\r\n            this.adjustCalendars();\r\n        },\r\n\r\n        adjustDate: function(sign, days) {\r\n\r\n            var day = this.getDate() || new Date();\r\n            var difference = parseInt(days)*24*60*60*1000;\r\n\r\n            var newDay;\r\n\r\n            if (sign === 'add') {\r\n                newDay = new Date(day.valueOf() + difference);\r\n            } else if (sign === 'subtract') {\r\n                newDay = new Date(day.valueOf() - difference);\r\n            }\r\n\r\n            this.setDate(newDay);\r\n        },\r\n\r\n        adjustCalendars: function() {\r\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\r\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\r\n                this.calendars[c] = adjustCalendar({\r\n                    month: this.calendars[0].month + c,\r\n                    year: this.calendars[0].year\r\n                });\r\n            }\r\n            this.draw();\r\n        },\r\n\r\n        gotoToday: function()\r\n        {\r\n            this.gotoDate(new Date());\r\n        },\r\n\r\n        /**\r\n         * change view to a specific month (zero-index, e.g. 0: January)\r\n         */\r\n        gotoMonth: function(month)\r\n        {\r\n            if (!isNaN(month)) {\r\n                this.calendars[0].month = parseInt(month, 10);\r\n                this.adjustCalendars();\r\n            }\r\n        },\r\n\r\n        nextMonth: function()\r\n        {\r\n            this.calendars[0].month++;\r\n            this.adjustCalendars();\r\n        },\r\n\r\n        prevMonth: function()\r\n        {\r\n            this.calendars[0].month--;\r\n            this.adjustCalendars();\r\n        },\r\n\r\n        /**\r\n         * change view to a specific full year (e.g. \"2012\")\r\n         */\r\n        gotoYear: function(year)\r\n        {\r\n            if (!isNaN(year)) {\r\n                this.calendars[0].year = parseInt(year, 10);\r\n                this.adjustCalendars();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * change the minDate\r\n         */\r\n        setMinDate: function(value)\r\n        {\r\n            if(value instanceof Date) {\r\n                setToStartOfDay(value);\r\n                this._o.minDate = value;\r\n                this._o.minYear  = value.getFullYear();\r\n                this._o.minMonth = value.getMonth();\r\n            } else {\r\n                this._o.minDate = defaults.minDate;\r\n                this._o.minYear  = defaults.minYear;\r\n                this._o.minMonth = defaults.minMonth;\r\n                this._o.startRange = defaults.startRange;\r\n            }\r\n\r\n            this.draw();\r\n        },\r\n\r\n        /**\r\n         * change the maxDate\r\n         */\r\n        setMaxDate: function(value)\r\n        {\r\n            if(value instanceof Date) {\r\n                setToStartOfDay(value);\r\n                this._o.maxDate = value;\r\n                this._o.maxYear = value.getFullYear();\r\n                this._o.maxMonth = value.getMonth();\r\n            } else {\r\n                this._o.maxDate = defaults.maxDate;\r\n                this._o.maxYear = defaults.maxYear;\r\n                this._o.maxMonth = defaults.maxMonth;\r\n                this._o.endRange = defaults.endRange;\r\n            }\r\n\r\n            this.draw();\r\n        },\r\n\r\n        setStartRange: function(value)\r\n        {\r\n            this._o.startRange = value;\r\n        },\r\n\r\n        setEndRange: function(value)\r\n        {\r\n            this._o.endRange = value;\r\n        },\r\n\r\n        /**\r\n         * refresh the HTML\r\n         */\r\n        draw: function(force)\r\n        {\r\n            if (!this._v && !force) {\r\n                return;\r\n            }\r\n            var opts = this._o,\r\n                minYear = opts.minYear,\r\n                maxYear = opts.maxYear,\r\n                minMonth = opts.minMonth,\r\n                maxMonth = opts.maxMonth,\r\n                html = '',\r\n                randId;\r\n\r\n            if (this._y <= minYear) {\r\n                this._y = minYear;\r\n                if (!isNaN(minMonth) && this._m < minMonth) {\r\n                    this._m = minMonth;\r\n                }\r\n            }\r\n            if (this._y >= maxYear) {\r\n                this._y = maxYear;\r\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\r\n                    this._m = maxMonth;\r\n                }\r\n            }\r\n\r\n            randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);\r\n\r\n            for (var c = 0; c < opts.numberOfMonths; c++) {\r\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';\r\n            }\r\n\r\n            this.el.innerHTML = html;\r\n\r\n            if (opts.bound) {\r\n                if(opts.field.type !== 'hidden') {\r\n                    sto(function() {\r\n                        opts.trigger.focus();\r\n                    }, 1);\r\n                }\r\n            }\r\n\r\n            if (typeof this._o.onDraw === 'function') {\r\n                this._o.onDraw(this);\r\n            }\r\n\r\n            if (opts.bound) {\r\n                // let the screen reader user know to use arrow keys\r\n                opts.field.setAttribute('aria-label', opts.ariaLabel);\r\n            }\r\n        },\r\n\r\n        adjustPosition: function()\r\n        {\r\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect, leftAligned, bottomAligned;\r\n\r\n            if (this._o.container) return;\r\n\r\n            this.el.style.position = 'absolute';\r\n\r\n            field = this._o.trigger;\r\n            pEl = field;\r\n            width = this.el.offsetWidth;\r\n            height = this.el.offsetHeight;\r\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\r\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\r\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n            leftAligned = true;\r\n            bottomAligned = true;\r\n\r\n            if (typeof field.getBoundingClientRect === 'function') {\r\n                clientRect = field.getBoundingClientRect();\r\n                left = clientRect.left + window.pageXOffset;\r\n                top = clientRect.bottom + window.pageYOffset;\r\n            } else {\r\n                left = pEl.offsetLeft;\r\n                top  = pEl.offsetTop + pEl.offsetHeight;\r\n                while((pEl = pEl.offsetParent)) {\r\n                    left += pEl.offsetLeft;\r\n                    top  += pEl.offsetTop;\r\n                }\r\n            }\r\n\r\n            // default position is bottom & left\r\n            if ((this._o.reposition && left + width > viewportWidth) ||\r\n                (\r\n                    this._o.position.indexOf('right') > -1 &&\r\n                    left - width + field.offsetWidth > 0\r\n                )\r\n            ) {\r\n                left = left - width + field.offsetWidth;\r\n                leftAligned = false;\r\n            }\r\n            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\r\n                (\r\n                    this._o.position.indexOf('top') > -1 &&\r\n                    top - height - field.offsetHeight > 0\r\n                )\r\n            ) {\r\n                top = top - height - field.offsetHeight;\r\n                bottomAligned = false;\r\n            }\r\n\r\n            this.el.style.left = left + 'px';\r\n            this.el.style.top = top + 'px';\r\n\r\n            addClass(this.el, leftAligned ? 'left-aligned' : 'right-aligned');\r\n            addClass(this.el, bottomAligned ? 'bottom-aligned' : 'top-aligned');\r\n            removeClass(this.el, !leftAligned ? 'left-aligned' : 'right-aligned');\r\n            removeClass(this.el, !bottomAligned ? 'bottom-aligned' : 'top-aligned');\r\n        },\r\n\r\n        /**\r\n         * render HTML for a particular month\r\n         */\r\n        render: function(year, month, randId)\r\n        {\r\n            var opts   = this._o,\r\n                now    = new Date(),\r\n                days   = getDaysInMonth(year, month),\r\n                before = new Date(year, month, 1).getDay(),\r\n                data   = [],\r\n                row    = [];\r\n            setToStartOfDay(now);\r\n            if (opts.firstDay > 0) {\r\n                before -= opts.firstDay;\r\n                if (before < 0) {\r\n                    before += 7;\r\n                }\r\n            }\r\n            var previousMonth = month === 0 ? 11 : month - 1,\r\n                nextMonth = month === 11 ? 0 : month + 1,\r\n                yearOfPreviousMonth = month === 0 ? year - 1 : year,\r\n                yearOfNextMonth = month === 11 ? year + 1 : year,\r\n                daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);\r\n            var cells = days + before,\r\n                after = cells;\r\n            while(after > 7) {\r\n                after -= 7;\r\n            }\r\n            cells += 7 - after;\r\n            var isWeekSelected = false;\r\n            for (var i = 0, r = 0; i < cells; i++)\r\n            {\r\n                var day = new Date(year, month, 1 + (i - before)),\r\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\r\n                    isToday = compareDates(day, now),\r\n                    hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,\r\n                    isEmpty = i < before || i >= (days + before),\r\n                    dayNumber = 1 + (i - before),\r\n                    monthNumber = month,\r\n                    yearNumber = year,\r\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\r\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\r\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\r\n                    isDisabled = (opts.minDate && day < opts.minDate) ||\r\n                        (opts.maxDate && day > opts.maxDate) ||\r\n                        (opts.disableWeekends && isWeekend(day)) ||\r\n                        (opts.disableDayFn && opts.disableDayFn(day));\r\n\r\n                if (isEmpty) {\r\n                    if (i < before) {\r\n                        dayNumber = daysInPreviousMonth + dayNumber;\r\n                        monthNumber = previousMonth;\r\n                        yearNumber = yearOfPreviousMonth;\r\n                    } else {\r\n                        dayNumber = dayNumber - days;\r\n                        monthNumber = nextMonth;\r\n                        yearNumber = yearOfNextMonth;\r\n                    }\r\n                }\r\n\r\n                var dayConfig = {\r\n                    day: dayNumber,\r\n                    month: monthNumber,\r\n                    year: yearNumber,\r\n                    hasEvent: hasEvent,\r\n                    isSelected: isSelected,\r\n                    isToday: isToday,\r\n                    isDisabled: isDisabled,\r\n                    isEmpty: isEmpty,\r\n                    isStartRange: isStartRange,\r\n                    isEndRange: isEndRange,\r\n                    isInRange: isInRange,\r\n                    showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths,\r\n                    enableSelectionDaysInNextAndPreviousMonths: opts.enableSelectionDaysInNextAndPreviousMonths\r\n                };\r\n\r\n                if (opts.pickWholeWeek && isSelected) {\r\n                    isWeekSelected = true;\r\n                }\r\n\r\n                row.push(renderDay(dayConfig));\r\n\r\n                if (++r === 7) {\r\n                    if (opts.showWeekNumber) {\r\n                        row.unshift(renderWeek(i - before, month, year));\r\n                    }\r\n                    data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));\r\n                    row = [];\r\n                    r = 0;\r\n                    isWeekSelected = false;\r\n                }\r\n            }\r\n            return renderTable(opts, data, randId);\r\n        },\r\n\r\n        isVisible: function()\r\n        {\r\n            return this._v;\r\n        },\r\n\r\n        show: function()\r\n        {\r\n            if (!this.isVisible()) {\r\n                this._v = true;\r\n                this.draw();\r\n                removeClass(this.el, 'is-hidden');\r\n                if (this._o.bound) {\r\n                    addEvent(document, 'click', this._onClick);\r\n                    this.adjustPosition();\r\n                }\r\n                if (typeof this._o.onOpen === 'function') {\r\n                    this._o.onOpen.call(this);\r\n                }\r\n            }\r\n        },\r\n\r\n        hide: function()\r\n        {\r\n            var v = this._v;\r\n            if (v !== false) {\r\n                if (this._o.bound) {\r\n                    removeEvent(document, 'click', this._onClick);\r\n                }\r\n                this.el.style.position = 'static'; // reset\r\n                this.el.style.left = 'auto';\r\n                this.el.style.top = 'auto';\r\n                addClass(this.el, 'is-hidden');\r\n                this._v = false;\r\n                if (v !== undefined && typeof this._o.onClose === 'function') {\r\n                    this._o.onClose.call(this);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * GAME OVER\r\n         */\r\n        destroy: function()\r\n        {\r\n            var opts = this._o;\r\n\r\n            this.hide();\r\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\r\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\r\n            removeEvent(this.el, 'change', this._onChange);\r\n            if (opts.keyboardInput) {\r\n                removeEvent(document, 'keydown', this._onKeyChange);\r\n            }\r\n            if (opts.field) {\r\n                removeEvent(opts.field, 'change', this._onInputChange);\r\n                if (opts.bound) {\r\n                    removeEvent(opts.trigger, 'click', this._onInputClick);\r\n                    removeEvent(opts.trigger, 'focus', this._onInputFocus);\r\n                    removeEvent(opts.trigger, 'blur', this._onInputBlur);\r\n                }\r\n            }\r\n            if (this.el.parentNode) {\r\n                this.el.parentNode.removeChild(this.el);\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    return Pikaday;\r\n}));"]}